(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{49:function(e,t,a){e.exports=a(79)},54:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),c=(a(54),a(30)),i=a(13),l=a(14),u=a(6),m=a(16),p=a(15),d=a(9),h=a(3),f=a.n(h),v=a(7),g=a(5),b=(a(32),r.a.createContext()),E=a(20);var w=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),s=(a[0],a[1],Object(n.useState)("")),o=Object(g.a)(s,2),c=o[0],i=o[1],l=Object(n.useState)(null),u=Object(g.a)(l,2),m=u[0],p=u[1],d=Object(n.useState)(null),h=Object(g.a)(d,2),w=h[0],k=h[1],y=Object(n.useContext)(b);function j(){return(j=Object(v.a)(f.a.mark((function t(a){var n,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a&&a.preventDefault&&(console.log("hi"),a.preventDefault()),n=window.location.origin+"/api/post/",r={content:c},E.defaults.headers.common.Authorization="token "+y.userToken,t.next=6,E.post(n,r);case 6:(s=t.sent).ok||("An error has occured: ".concat(s.status),p("alert alert-danger"),k("error")),p("alert alert-success"),k("Your post was created!"),e.rerender(s.data);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"newPost Container flex-row"},r.a.createElement("div",{className:m||"d-none",role:"alert"},w),r.a.createElement("div",{className:"row flex-row"},r.a.createElement("div",{className:"col-xs-2 p-auto m-auto"},r.a.createElement("img",{className:"postAvatar rounded-circle align-self-start m-1 mr-2 ",width:"50",height:"50",src:y.userAvatar,alt:"User Avatar"})),r.a.createElement("div",{className:"flex-grow-1 m-auto"},r.a.createElement("input",{type:"text",placeholder:"what's in your mind?",className:"flex-grow-0 textAnswer form-control",name:"answer",form:"Testing",id:"postanswer",value:c,onChange:function(e){return i(e.target.value)},onSubmit:alert})),r.a.createElement("form",{id:"newPost",className:" pl-1 m-auto submit-form pt-2 pb-2 pl-2",name:"Testing"},r.a.createElement("input",{type:"button",value:"Submit",className:"btn btn-light newPostSubmit w-100",onClick:function(e){return j.apply(this,arguments)}}))))},k=a(20);var y=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),s=(a[0],a[1],Object(n.useState)("")),o=Object(g.a)(s,2),c=o[0],i=o[1],l=Object(n.useState)(null),u=Object(g.a)(l,2),m=u[0],p=u[1],d=Object(n.useState)(null),h=Object(g.a)(d,2),E=h[0],w=h[1],y=Object(n.useContext)(b);function j(e){return x.apply(this,arguments)}function x(){return(x=Object(v.a)(f.a.mark((function t(a){var n,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a&&a.preventDefault&&a.preventDefault(),n=window.location.origin+"/api/post/comment/".concat(e.post.id,"/"),r={content:c,posts:e.post.id},k.defaults.headers.common.Authorization="token "+y.userToken,t.next=6,k.post(n,r);case 6:(s=t.sent).ok||("An error has occured: ".concat(s.status),p("alert alert-danger"),w("error")),p("alert alert-success"),w("Your post was created!"),e.rerender(s.data);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"newPost Container flex-row"},r.a.createElement("div",{className:m||"d-none",role:"alert"},E),r.a.createElement("div",{className:"row flex-nowrap "},r.a.createElement("div",{className:"col-xs-2 p-auto m-auto"},r.a.createElement("img",{className:"postAvatar rounded-circle align-self-start m-1 mr-2 ",width:"50",height:"50",src:y.userAvatar,alt:"User Avatar"})),r.a.createElement("div",{className:"flex-grow-1 m-auto"},r.a.createElement("input",{type:"text",placeholder:"what's in your mind?",className:"flex-grow-0 textAnswer form-control",name:"answer",form:"newPost",id:"postanswer",value:c,onChange:function(e){return i(e.target.value)},onSubmit:j})),r.a.createElement("form",{id:"newPost",className:" pl-1 m-auto submit-form pt-2 pb-2 pl-2",name:"Testing"},r.a.createElement("input",{type:"button",value:"Submit",className:"btn btn-light newPostSubmit w-100",onClick:j}))))},j=a(8),x=a(83),P=a(84),N=a(20);var O=function(e){var t=Object(n.useContext)(b),a=Object(n.useState)(!1),s=Object(g.a)(a,2),o=s[0],c=s[1],i=Object(n.useState)(!1),l=Object(g.a)(i,2),u=l[0],m=l[1];function p(e){return d.apply(this,arguments)}function d(){return(d=Object(v.a)(f.a.mark((function a(n){var r,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return N.defaults.headers.common.Authorization="token "+t.userToken,r=window.location.origin+"/api/".concat(e.type,"/").concat(n,"/").concat(e.post.id,"/"),a.prev=2,a.next=5,N.get(r);case 5:s=a.sent,"like"==n?(0==o&&m(!1),c(!o)):(0==u&&c(!1),m(!u)),console.log(s.data),e.edit(s.data),a.next=14;break;case 11:return a.prev=11,a.t0=a.catch(2),a.abrupt("return",0);case 14:case"end":return a.stop()}}),a,null,[[2,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){c(e.post.authorLiked),m(e.post.authorDisliked)}),[]),r.a.createElement("div",null,r.a.createElement(x.a,{fill:o?"red":"",className:"heart mb-2",onClick:function(){return p("like")}})," ",e.post.likeCount,r.a.createElement(P.a,{fill:u?"red":"",className:"ml-2 heart mb-2",onClick:function(){return p("dislike")}})," ",e.post.dislikeCount)};var C=function(e){return r.a.createElement("div",{className:"UserInfo d-flex position-relative"},r.a.createElement(j.b,{to:"/users/"+e.post.author.id},r.a.createElement("img",{className:"PostAvatar rounded-circle align-self-start m-1 mr-2",width:"50",height:"50",src:e.post.author.avatar,alt:"User Avatar"})),r.a.createElement("div",{className:"media-body mr-2"},r.a.createElement(j.b,{to:"/users/"+e.post.author.id},r.a.createElement("h5",{className:"name"},e.post.author.username)),r.a.createElement("div",{className:""},r.a.createElement("p",{className:"row col-12"},e.post.content)),r.a.createElement(O,{post:e.post,type:"post",edit:!1})))},S=(a(20),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={post:!1,comments:!1,error:null},n.editComment=n.editComment.bind(Object(u.a)(n)),n.editPost=n.editPost.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"editComment",value:function(e,t){this.setState((function(a){return a.comments[e]=t,a}))}},{key:"editPost",value:function(e){this.setState((function(t){return t.post=e,t}))}},{key:"render",value:function(){var e=this.props.post.comments.slice(0,2).map((function(e,t){return r.a.createElement(C,{post:e,key:t})}));return r.a.createElement("div",{className:"post m-1 mb-0 "},r.a.createElement("div",{className:"UserInfo d-flex m-1 position-relative"},r.a.createElement(j.b,{to:"/post/"+this.props.post.id},r.a.createElement(C,{post:this.props.post}),r.a.createElement("div",{className:"position-absolute timeStamp"},this.props.post.create_at))),0!=this.props.post.comments?r.a.createElement(j.b,{to:"/post/"+this.props.post.id},r.a.createElement("div",{className:"commentsWrap"},e)):"")}}]),a}(r.a.Component)),A=a(91),T=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),s=a[0],o=a[1];Object(n.useEffect)((function(){o(Math.floor(e.postCount/e.resultsPerPage))}),[e]);var c=[];console.log(e.currentPage,s),e.currentPage<s&&c.push(r.a.createElement(A.a.Item,{key:2,onClick:function(){return e.changePostPage(e.currentPage+1)}},"Next")),1!=e.currentPage&&c.unshift(r.a.createElement(A.a.Item,{key:1,onClick:function(){return e.changePostPage(e.currentPage-1)}},"Previous"));var i=r.a.createElement("div",null,r.a.createElement(A.a,null,c));return r.a.createElement("div",null,i)},D=a(20),I=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={post:[],error:null,postCount:null,currentPage:1},e.rerenderComment=e.rerenderComment.bind(Object(u.a)(e)),e.rerenderPost=e.rerenderPost.bind(Object(u.a)(e)),e.changePostPage=e.changePostPage.bind(Object(u.a)(e)),e}return Object(l.a)(a,[{key:"changePostPage",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var a,n,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.state.currentPage){e.next=2;break}return e.abrupt("return",0);case 2:return a=window.location.origin+"/api/post/friends/?page=".concat(t),e.next=5,fetch(a,{method:"GET",headers:{Authorization:"token "+this.context.userToken,"Content-Type":"application/json"}});case 5:if((n=e.sent).ok){e.next=10;break}return r="An error has occured: ".concat(n.status),console.log(r),e.abrupt("return",this.setState({badrequest:n.text()}));case 10:return e.next=12,n.json();case 12:return s=e.sent,e.abrupt("return",this.setState((function(e){return e.post=s.results,e.currentPage=t,e})));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rerenderComment",value:function(e,t){this.setState((function(a){return a.post[t].comments.unshift(e),a}))}},{key:"rerenderPost",value:function(e){this.setState((function(t){return t.post.unshift(e),t}))}},{key:"componentDidMount",value:function(){this.getPost()}},{key:"getPost",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D.defaults.headers.common.Authorization="token "+this.context.userToken,t=D.get("/api/post/friends/"),e.prev=2,e.next=5,t;case 5:a=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),this.setState((function(t){return t.error=e.t0,t}));case 12:this.setState((function(e){return e.post=a.data.results,e.postCount=a.data.count,e})),console.log(a.data.results);case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.post.map((function(t,a){return r.a.createElement("div",{className:"postPreview col-xl-12",key:a},r.a.createElement(S,{key:a,post:t}),r.a.createElement(y,{post:t,rerender:function(t){return e.rerenderComment(t,a)}}))}));return r.a.createElement("div",{className:"PostWrapWrap container"},r.a.createElement("div",{className:"postWrap row m-3"},r.a.createElement("div",{className:"Post col-xl-12 "},r.a.createElement(w,{rerender:this.rerenderPost}))),t,r.a.createElement(T,{postCount:this.state.postCount,resultsPerPage:this.state.post.length,changePostPage:this.changePostPage,currentPage:this.state.currentPage}))}}]),a}(r.a.Component);I.contextType=b;var U=I,W=a(20),z=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={post:[],error:null,currentPage:1,postCount:null},e.rerenderComment=e.rerenderComment.bind(Object(u.a)(e)),e.rerenderPost=e.rerenderPost.bind(Object(u.a)(e)),e.changePostPage=e.changePostPage.bind(Object(u.a)(e)),e}return Object(l.a)(a,[{key:"rerenderComment",value:function(e,t){this.setState((function(a){return a.post[t].comments.unshift(e),a}))}},{key:"rerenderPost",value:function(e){this.setState((function(t){return t.post.unshift(e),t}))}},{key:"componentDidMount",value:function(){this.getPost()}},{key:"changePostPage",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var a,n,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.state.currentPage){e.next=2;break}return e.abrupt("return",0);case 2:return a=window.location.origin+"/api/post/?page=".concat(t),e.next=5,fetch(a,{method:"GET",headers:{Authorization:"token "+this.context.userToken,"Content-Type":"application/json"}});case 5:if((n=e.sent).ok){e.next=10;break}return r="An error has occured: ".concat(n.status),console.log(r),e.abrupt("return",this.setState({badrequest:n.text()}));case 10:return e.next=12,n.json();case 12:return s=e.sent,e.abrupt("return",this.setState((function(e){return e.post=s.results,e.currentPage=t,e})));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPost",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W.defaults.headers.common.Authorization="token "+this.context.userToken,t=W.get("/api/post/"),e.prev=2,e.next=5,t;case 5:a=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),this.setState((function(t){return t.error=e.t0,t}));case 12:this.setState((function(e){return e.post=a.data.results,e.postCount=a.data.count,e}));case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.post.map((function(t,a){return r.a.createElement("div",{className:"postPreview col-xl-12"},r.a.createElement(S,{key:a,post:t}),r.a.createElement(y,{post:t,rerender:function(t){return e.rerenderComment(t,a)}}))}));return r.a.createElement("div",{className:"PostWrapWrap container"},r.a.createElement("div",{className:"postWrap row m-3"},r.a.createElement("div",{className:"Post col-xl-12 "},r.a.createElement(w,{rerender:this.rerenderPost}))),t,r.a.createElement(T,{postCount:this.state.postCount,resultsPerPage:this.state.post.length,changePostPage:this.changePostPage,currentPage:this.state.currentPage}))}}]),a}(r.a.Component);z.contextType=b;var F=z;var M=function(e){var t=Object(n.useContext)(b),a=Object(n.useState)(!1),s=Object(g.a)(a,2),o=(s[0],s[1],Object(n.useState)()),c=Object(g.a)(o,2),i=c[0],l=c[1];function u(){return(u=Object(v.a)(f.a.mark((function a(){var n,r,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i,console.log("test"),l(!i),n=window.location.origin+"/api/user/follow/".concat(e.userData.id,"/"),a.next=6,fetch(n,{method:"GET",headers:{Authorization:"token "+t.userToken,"Content-Type":"application/json"}});case 6:(r=a.sent).ok||(s="An error has occured: ".concat(r.status),console.log(s));case 8:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(n.useEffect)((function(){l(e.userData.followers?e.userData.followers.some((function(e){return a=e.pk,n=t.userID,a==n;var a,n})):0)}),[e]),r.a.createElement("div",{className:"row pt-3"},r.a.createElement("div",{className:"avatar col-xs-10 col-md-4 d-flex justify-content-center"},r.a.createElement("img",{src:e.userData.avatar,className:"PostAvatar rounded-circle align-self-start m-1 mr-2",width:"100",height:"120",alt:"User Avatar"})),r.a.createElement("div",{className:"profileData col-xs-10 col-md-8 d-flex justify-content-center flex-column container"},r.a.createElement("div",{className:"name"}," ",r.a.createElement("h2",null,e.userData.username)),r.a.createElement("div",{className:"about"},r.a.createElement("h5",null,e.userData.about)),r.a.createElement("div",{className:"row"},r.a.createElement(j.b,{className:"",to:"/home"},r.a.createElement("div",{className:"follower col-md-2 col-5 text-nowrap"},e.userData.num_followers?e.userData.num_followers:0," Followers ")),r.a.createElement(j.b,{className:"",to:"/home"},r.a.createElement("div",{className:"follower col-md-2 col-5 text-nowrap"},e.userData.num_following?e.userData.num_following:0," Following"))),r.a.createElement("div",{className:"pt-3 pb-3"},!e.sameUser&&r.a.createElement("div",{className:"followUnfollow"},r.a.createElement("form",{onClick:function(){return u.apply(this,arguments)}},r.a.createElement("input",{type:"button",value:i?"Unfollow":"Follow",className:"btn btn-success followUnfollow"}))))))},_=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:null,post:!1,mouseOverAvatar:!1,sameUser:[],userData:[],rerenderizer:!1,error:null,postCount:null,currentPage:1},n.isSameuser=n.isSameuser.bind(Object(u.a)(n)),n.rerenderPost=n.rerenderPost.bind(Object(u.a)(n)),n.changePostPage=n.changePostPage.bind(Object(u.a)(n)),n.editProfile=n.editProfile.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isSameuser();case 2:Promise.all([this.getUserProfile(),this.getUserPost()]).then((function(e){var a=Object(g.a)(e,2),n=a[0],r=a[1];console.log(r),t.setState((function(e){return e.userData=n,e.post=r.results,e.postCount=r.count,e}))})).catch((function(e){return t.setState({userData:"unknow error"})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserProfile",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.origin+"/api/user/".concat(this.state.user,"/"),e.next=3,fetch(t,{method:"GET",headers:{Authorization:"token "+this.context.userToken,"Content-Type":"application/json"}});case 3:return(a=e.sent).ok||(n="An error has occured: ".concat(a.status),console.log(n),this.setState((function(e){e.error=a.text()}))),e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserPost",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.origin+"/api/user/post/".concat(this.state.user,"/"),e.next=3,fetch(t,{method:"GET",headers:{Authorization:"token "+this.context.userToken,"Content-Type":"application/json"}});case 3:return(a=e.sent).ok||(n="An error has occured: ".concat(a.status),console.log(n),this.setState({badrequest:a.text()})),r=a.json(),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changePostPage",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var a,n,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.state.currentPage){e.next=2;break}return e.abrupt("return",0);case 2:return a=window.location.origin+"/api/user/post/".concat(this.state.user,"/?page=").concat(t),e.next=5,fetch(a,{method:"GET",headers:{Authorization:"token "+this.context.userToken,"Content-Type":"application/json"}});case 5:if((n=e.sent).ok){e.next=10;break}return r="An error has occured: ".concat(n.status),console.log(r),e.abrupt("return",this.setState({badrequest:n.text()}));case 10:return e.next=12,n.json();case 12:return s=e.sent,e.abrupt("return",this.setState((function(e){return e.post=s.results,e.currentPage=t,e})));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editProfile",value:function(e){e=e?1:-1,this.setState((function(t){return t.userData.num_followers+=e,t}))}},{key:"isSameuser",value:function(){var e=this;try{this.props.match.params.userid==this.context.userID?this.setState((function(e){return e.sameUser=!0,e})):this.setState((function(e){return e.sameUser=!1,e}))}catch(t){this.setState((function(t){return t.user=e.context.userID,t.sameUser=!0,t}))}return Promise.resolve(1)}},{key:"rerenderPost",value:function(e){this.setState((function(t){return t.post.unshift(e),t}))}},{key:"render",value:function(){var e="hi";return this.state.post&&(e=this.state.post.map((function(e,t){return r.a.createElement("div",{className:"postPreview col-6 col-md-4 col-xl-4"},r.a.createElement(S,{key:t,post:e}))}))),r.a.createElement("div",null,r.a.createElement("div",{className:"AccountIDWrap container "},r.a.createElement(M,{sameUser:this.state.sameUser,userData:this.state.userData,edit:this.editProfile})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center m-3"},r.a.createElement("div",{className:"col-10"},this.state.sameUser&&r.a.createElement(w,{rerender:this.rerenderPost,type:"post"})))),r.a.createElement("div",null,r.a.createElement("div",{className:"postPreviewWrapWrap container"},r.a.createElement("div",{className:"postPreviewWrap row"},e,r.a.createElement(T,{postCount:this.state.postCount,resultsPerPage:this.state.post.length,changePostPage:this.changePostPage,currentPage:this.state.currentPage})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){try{if(e.match.params.userid)return{user:e.match.params.userid}}catch(a){return{}}}}]),a}(r.a.Component);_.contextType=b;var q=_,L=a(20);var G=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),s=a[0],o=a[1],c=Object(n.useState)(!1),i=Object(g.a)(c,2),l=i[0],u=i[1],m=Object(n.useState)(""),p=Object(g.a)(m,2),d=p[0],h=p[1],E=Object(n.useContext)(b);function w(){o(!s)}function k(){return(k=Object(v.a)(f.a.mark((function t(a){var n,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a&&a.preventDefault&&a.preventDefault(),n=window.location.origin+"/api/post/".concat(e.post.id,"/"),r={content:d,posts:e.post.id},L.defaults.headers.common.Authorization="token "+E.userToken,t.next=6,L.put(n,r);case 6:(s=t.sent).ok||"An error has occured: ".concat(s.status),u(!1),e.editPost(s.data);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var y=e.post.author.id==E.userID,x=r.a.createElement("div",{class:"dropdown-menu d-block position-relative drop-down-edit-deleted-comment-post"},r.a.createElement("a",{onClick:function(){h(e.post.content),u(!l),o(!s)},className:"dropdown-item"},"Edit"),r.a.createElement("a",{class:"dropdown-item"},"Delete")),P=r.a.createElement("div",{className:"container"},r.a.createElement("form",{id:"newPost",className:"row flex-row"},r.a.createElement("input",{type:"text",placeholder:"what's in your mind?",className:" col-8 col-md-9 col-xl-10 flex-grow-0 textAnswer form-control mr-2",name:"answer",form:"newPost",id:"postanswer",value:d,onChange:function(e){return h(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Save",className:"col-3 col-md-2 col-xl-1 btn btn-light newPostSubmit",onClick:function(e){return k.apply(this,arguments)}})));return r.a.createElement("div",{className:"UserInfo d-flex position-relative"},r.a.createElement(j.b,{to:"/users/"+e.post.author.id},r.a.createElement("img",{className:"PostAvatar rounded-circle align-self-start m-1 mr-2",width:"50",height:"50",src:e.post.author.avatar,alt:"User Avatar"})),r.a.createElement("div",{className:"media-body mr-2"},r.a.createElement(j.b,{to:"/users/"+e.post.author.id},r.a.createElement("h5",{className:"name"},e.post.author.username)),r.a.createElement("div",{className:""},l?P:r.a.createElement("p",{className:"row col-12"},e.post.content)),r.a.createElement(O,{post:e.post,type:"post",edit:e.editPost})),r.a.createElement("div",{className:"position-absolute timeStamp"},e.post.create_at),y?s?r.a.createElement("p",{onClick:function(){return w()},className:"position-relative edit-deleted-comment-post-moved"},"..."):r.a.createElement("p",{onClick:function(){return w()},className:"position-relative edit-deleted-comment-post"},"..."):[],s&&y?x:[])},R=a(20);var B=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),s=a[0],o=a[1],c=Object(n.useState)(!1),i=Object(g.a)(c,2),l=i[0],u=i[1],m=Object(n.useState)(""),p=Object(g.a)(m,2),d=p[0],h=p[1],E=Object(n.useContext)(b);function w(){o(!s)}function k(){return(k=Object(v.a)(f.a.mark((function t(a){var n,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a&&a.preventDefault&&a.preventDefault(),n=window.location.origin+"/api/comment/".concat(e.post.id,"/"),r={content:d,posts:e.post.id},R.defaults.headers.common.Authorization="token "+E.userToken,t.next=6,R.put(n,r);case 6:(s=t.sent).ok||"An error has occured: ".concat(s.status),console.log(s),u(!1),e.editComment(s.data);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var y=e.post.author.id==E.userID,x=r.a.createElement("div",{class:"dropdown-menu d-block position-relative drop-down-edit-deleted-comment-post"},r.a.createElement("a",{onClick:function(){h(e.post.content),u(!l),o(!s)},className:"dropdown-item"},"Edit"),r.a.createElement("a",{class:"dropdown-item"},"Delete")),P=r.a.createElement("div",{className:"container"},r.a.createElement("form",{id:"newPost",className:"row flex-row"},r.a.createElement("input",{type:"text",placeholder:"what's in your mind?",className:" col-8 col-md-9 col-xl-10 flex-grow-0 textAnswer form-control mr-2",name:"answer",form:"newPost",id:"postanswer",value:d,onChange:function(e){return h(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Save",className:"col-3 col-md-2 col-xl-1 btn btn-light newPostSubmit",onClick:function(e){return k.apply(this,arguments)}})));return r.a.createElement("div",{className:"UserInfo d-flex position-relative"},r.a.createElement(j.b,{to:"/users/"+e.post.author.id},r.a.createElement("img",{className:"PostAvatar rounded-circle align-self-start m-1 mr-2",width:"50",height:"50",src:e.post.author.avatar,alt:"User Avatar"})),r.a.createElement("div",{className:"media-body mr-2"},r.a.createElement(j.b,{to:"/users/"+e.post.author.id},r.a.createElement("h5",{className:"name"},e.post.author.username)),r.a.createElement("div",{className:""},l?P:r.a.createElement("p",{className:"row col-12"},e.post.content)),r.a.createElement(O,{post:e.post,type:"comment",edit:e.editComment})),y?s?r.a.createElement("p",{onClick:function(){return w()},className:"position-relative edit-deleted-comment-post-moved"},"..."):r.a.createElement("p",{onClick:function(){return w()},className:"position-relative edit-deleted-comment-post"},"..."):[],s&&y?x:[])},J=a(20),K=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={post:!1,comments:!1,error:null},n.createComment=n.createComment.bind(Object(u.a)(n)),n.editComment=n.editComment.bind(Object(u.a)(n)),n.editPost=n.editPost.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){J.defaults.headers.common.Authorization="token "+this.context.userToken,this.getPost()}},{key:"createComment",value:function(e){this.setState((function(t){return t.comments.push(e),t}))}},{key:"editComment",value:function(e,t){this.setState((function(a){return a.comments[e]=t,a}))}},{key:"editPost",value:function(e){this.setState((function(t){return t.post=e,t}))}},{key:"getPost",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,n,r,s,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.origin,r=J.get(t+"/api/post/".concat(this.props.match.params.postid)),s=J.get(t+"/api/post/comment/".concat(this.props.match.params.postid)),e.prev=3,e.next=6,Promise.all([r,s]);case 6:o=e.sent,c=Object(g.a)(o,2),a=c[0],n=c[1],e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(3),console.error(e.t0),this.setState((function(e){return e.error="Under Maintenance",e})),e.abrupt("return",0);case 17:n.data=n.data.reverse(),this.setState((function(e){return e.post=a.data,e.comments=n.data,e}));case 19:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return this.state.post?(e=this.state.comments.map((function(e,a){return r.a.createElement(B,{post:e,key:a,editComment:function(e){return t.editComment(a,e)}})})),r.a.createElement("div",{className:"PostWrapWrap container mt-3"},r.a.createElement("div",{className:"post"},r.a.createElement(G,{post:this.state.post,type:"post",editPost:this.editPost}),r.a.createElement("div",{className:"commentsWrap"},e)),r.a.createElement(y,{rerender:this.createComment,post:this.state.post}))):r.a.createElement("div",{className:"PostWrapWrap container"},this.state.error?this.state.error:"loading")}}]),a}(r.a.Component);K.contextType=b;var Y=K,H=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={username:"",password:"",password_retype:"",email:"",badrequest:"",login:!0,redirect:!1},e.login=e.login.bind(Object(u.a)(e)),e.handleForm=e.handleForm.bind(Object(u.a)(e)),e.register=e.register.bind(Object(u.a)(e)),e.toogleRegister=e.toogleRegister.bind(Object(u.a)(e)),e.getUserAvatar=e.getUserAvatar.bind(Object(u.a)(e)),e}return Object(l.a)(a,[{key:"toogleRegister",value:function(e){e.preventDefault();var t=this.state.login;this.setState((function(e){return e.login=!t,e}))}},{key:"handleForm",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState((function(e){return e[a]=n,e}))}},{key:"register",value:function(e){var t=this;if(e.preventDefault(),this.state.password_retype!==this.state.password)return this.setState({badrequest:"passwords do not match"});var a=window.location.origin+"/api/register/";fetch(a,{method:"POST",headers:{Authorization:2,"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password,password_retype:this.state.password_retype,email:this.state.email})}).then((function(e){if(!e.ok)throw console.log(e),new Error("Incorrect credentials");return e.json()})).then((function(e){console.log(t.state),t.login(e)})).catch((function(e){console.log(e),t.setState({badrequest:e.message})}))}},{key:"getUserAvatar",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.location.origin+"/api/user/".concat(t.id,"/"),e.next=3,fetch(a,{method:"GET",headers:{Authorization:"token "+t.token,"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r.avatar);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault&&t.preventDefault(),"api/api-token-auth/",e.next=4,fetch("api/api-token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})});case 4:if((a=e.sent).ok){e.next=7;break}return e.abrupt("return",this.setState({badrequest:a.error}));case 7:return e.next=9,a.json();case 9:return n=e.sent,e.next=12,this.getUserAvatar(n);case 12:n.avatar=e.sent,this.context.changeLoggedIn(n),this.setState({redirect:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.redirect?r.a.createElement(d.a,{push:!0,to:"/home"}):this.state.login?r.a.createElement("div",{className:"container-fluid main body"},r.a.createElement("div",{className:"form d-flex justify-content-center align-items-center"},r.a.createElement("form",{className:"loginForm",action:this.login},r.a.createElement("div",{className:"form-group"},this.state.badrequest?r.a.createElement("div",{class:"alert alert-danger",role:"alert"},this.state.badrequest):r.a.createElement("div",null),r.a.createElement("label",{for:"username"}," Username"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter email",name:"username",onChange:this.handleForm,value:this.state.username}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else."),r.a.createElement("br",null),r.a.createElement("label",{for:"password"}," Password"),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Enter password",name:"password",onChange:this.handleForm,value:this.state.password}),r.a.createElement("br",null),r.a.createElement("div",{className:"center-align"},r.a.createElement("input",{type:"Submit",value:"Submit",className:"btn btn-primary",onClick:this.login}),r.a.createElement("hr",{class:"solid"}),r.a.createElement("p",null,"Or Create an Account"),r.a.createElement("button",{className:"btn btn-primary",onClick:this.toogleRegister},"Register")))))):r.a.createElement("div",{className:"container-fluid main body"},r.a.createElement("div",{className:"form d-flex justify-content-center align-items-center"},r.a.createElement("form",{className:"loginForm",action:this.register},r.a.createElement("div",{className:"form-group"},this.state.badrequest?r.a.createElement("div",{class:"alert alert-danger",role:"alert"},this.state.badrequest):r.a.createElement("div",null),this.state.login,r.a.createElement("label",{for:"username"}," Username"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter Username",name:"username",onChange:this.handleForm,value:this.state.username}),r.a.createElement("label",{for:"password"}," Password"),r.a.createElement("input",{type:"password",placeholder:"Enter password",className:"form-control",name:"password",onChange:this.handleForm,value:this.state.password}),r.a.createElement("label",{for:"password_retype"}," Password"),r.a.createElement("input",{type:"password",placeholder:"Enter password",className:"form-control",name:"password_retype",onChange:this.handleForm,value:this.state.password_retype}),r.a.createElement("label",{for:"email"}," Email"),r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",onChange:this.handleForm,value:this.state.email}),r.a.createElement("br",null),r.a.createElement("div",{className:"center-align"},r.a.createElement("input",{type:"submit",value:"submit",className:"btn btn-primary",onClick:this.register}),r.a.createElement("hr",{class:"solid"}),r.a.createElement("p",null,"Or Log In into you account"),r.a.createElement("button",{className:"btn btn-primary",onClick:this.toogleRegister},"Log In"))))))}}]),a}(r.a.Component);H.contextType=b;var $=H;var Q=function(){return r.a.createElement("div",{className:"notFoundWrap container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"image col-xs-6"}),r.a.createElement("div",{className:"text col-xs-6"}," There's nothing here")))},V=a(85),X=a(86),Z=a(87),ee=a(88),te=a(89),ae=a(90);var ne=function(){var e=Object(n.useState)(!0),t=Object(g.a)(e,2),a=t[0],s=t[1],o=Object(d.g)(),c=Object(n.useContext)(b);function i(e){o.push("/".concat(e))}!function(){var e=Object(n.useState)(0),t=Object(g.a)(e,2),a=(t[0],t[1])}();var l=r.a.forwardRef((function(e,t){var a=e.children,n=e.onClick;return r.a.createElement("a",{href:"",ref:t,onClick:function(e){e.preventDefault(),n(e)}},a)}));return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},r.a.createElement(j.b,{className:"navbar-brand mr-auto",to:"/home"},r.a.createElement(V.a,null)),r.a.createElement("div",{className:"navbar-expand",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("form",{className:"mx-2 my-auto"},r.a.createElement("input",{type:"text",className:a?"nav-link d-none searchNavBar w-100":"nav-link searchNavBar form-control",name:"search",id:"searc"}))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:function(){s(!a)}},r.a.createElement(X.a,null))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(j.b,{className:"nav-link",to:"/index"},r.a.createElement(Z.a,null))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(j.b,{className:"nav-link",to:"/feed"},r.a.createElement(ee.a,null))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"nav-link",to:"/Examples"},r.a.createElement(ae.a,null,r.a.createElement(ae.a.Toggle,{as:l,id:"dropdown-custom-components"},r.a.createElement(te.a,null)),c.userToken?r.a.createElement(ae.a.Menu,null,r.a.createElement(ae.a.Item,{eventKey:"1",onClick:function(){return i("home")}},"My Profile"),r.a.createElement(ae.a.Item,{eventKey:"2",onClick:function(){return i("myaccount")}},"Edit my account"),r.a.createElement(ae.a.Item,{eventKey:"3",onClick:function(){return c.changeLoggedIn(),void o.push("/login")}},"Sign Out")):r.a.createElement(ae.a.Menu,null,r.a.createElement(ae.a.Item,{eventKey:"1",onClick:function(){return i("Login")}},"Login"))))))))},re=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={userID:e.getuserID(),userToken:e.getuserToken(),userAvatar:e.getuserAvatar()},e.getuserID=e.getuserID.bind(Object(u.a)(e)),e.getuserToken=e.getuserToken.bind(Object(u.a)(e)),e.changeLoggedIn=e.changeLoggedIn.bind(Object(u.a)(e)),e.getuserAvatar=e.getuserAvatar.bind(Object(u.a)(e)),e}return Object(l.a)(a,[{key:"changeLoggedIn",value:function(e){sessionStorage.getItem("user")?(sessionStorage.removeItem("user"),sessionStorage.removeItem("userID"),sessionStorage.removeItem("userAvatar"),this.setState({userToken:!1,userID:!1,userAvatar:!1})):(sessionStorage.setItem("user",e.token),sessionStorage.setItem("userID",e.id),sessionStorage.setItem("userAvatar",e.avatar),this.setState({userToken:e.token,userID:e.id,userAvatar:e.avatar}))}},{key:"getuserID",value:function(){return!!sessionStorage.getItem("userID")&&sessionStorage.getItem("userID")}},{key:"getuserToken",value:function(){return!!sessionStorage.getItem("user")&&sessionStorage.getItem("user")}},{key:"getuserAvatar",value:function(){return!!sessionStorage.getItem("userAvatar")&&sessionStorage.getItem("userAvatar")}},{key:"render",value:function(){var e=this;return r.a.createElement(b.Provider,{value:Object(c.a)(Object(c.a)({},this.state),{},{changeLoggedIn:this.changeLoggedIn})},r.a.createElement("div",{className:"BackGround"},r.a.createElement(ne,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login",component:$}),r.a.createElement(d.b,{path:"/feed",render:function(){return e.getuserToken()?r.a.createElement(U,{friends:!1,key:Math.random()}):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{path:"/index",render:function(){return e.getuserToken()?r.a.createElement(F,{friends:!0,key:Math.random()}):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{path:"/home",render:function(){return e.getuserToken()?r.a.createElement(q,{key:Math.random()}):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{path:"/users/:userid",render:function(t){return e.getuserToken()?r.a.createElement(q,Object.assign({},t,{key:Math.random()})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{path:"/post/:postid",render:function(t){return e.getuserToken()?r.a.createElement(Y,Object.assign({},t,{key:Math.random()})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{render:function(){return e.getuserToken()?r.a.createElement(Q,{key:Math.random()}):r.a.createElement(d.a,{to:"/login"})}}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(78);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j.a,null,r.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.a183a863.chunk.js.map